<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Color Mixer ‚Äî ColorPick</title>
  <meta name="description" content="Mix two colors and see the result with gradient transitions. Multiple blend modes supported.">
  <link rel="stylesheet" href="style.css">
  <script src="colorpick.js"></script>
  <style>
    .mixer-row { display:flex; flex-wrap:wrap; gap:1.5rem; align-items:center; justify-content:center; margin:2rem 0; }
    .color-input-group { display:flex; flex-direction:column; align-items:center; gap:0.5rem; }
    .color-input-group input[type="color"] { width:80px; height:80px; border-radius:16px; cursor:pointer; padding:2px; }
    .color-input-group input[type="text"] { width:100px; text-align:center; }
    .result-swatch { width:120px; height:120px; border-radius:20px; transition:all 0.5s; box-shadow:0 8px 30px rgba(0,0,0,0.3); }
    .gradient-bar { height:80px; border-radius:16px; margin:2rem auto; max-width:700px; transition:background 0.5s; cursor:crosshair; position:relative; }
    .gradient-bar:hover { transform:scaleY(1.1); box-shadow:0 4px 20px rgba(0,0,0,0.3); }
    .mode-tabs { display:flex; flex-wrap:wrap; gap:0.5rem; justify-content:center; margin:1.5rem 0; }
    .mode-tab { padding:0.5rem 1rem; border-radius:10px; background:var(--surface2); color:var(--text2); border:none; cursor:pointer; font-weight:600; font-family:inherit; transition:all 0.2s; }
    .mode-tab.active { background:var(--gradient); color:#fff; }
    .steps-row { display:flex; flex-wrap:wrap; gap:0.75rem; justify-content:center; margin:2rem 0; }
    .step-swatch { width:60px; height:80px; border-radius:12px; cursor:pointer; transition:all 0.3s; display:flex; align-items:flex-end; justify-content:center; padding-bottom:6px; font-size:0.65rem; font-weight:700; color:#fff; text-shadow:0 1px 3px rgba(0,0,0,0.5); }
    .step-swatch:hover { transform:scale(1.15); box-shadow:0 6px 20px rgba(0,0,0,0.4); }
    .confetti { position:fixed; pointer-events:none; z-index:1000; }
    .confetti-piece { position:absolute; width:8px; height:8px; border-radius:50%; animation:cfall 1s ease-out forwards; }
    @keyframes cfall { 0%{opacity:1;transform:translateY(0) rotate(0)} 100%{opacity:0;transform:translateY(120px) rotate(720deg)} }
    .bg-transition { transition:background-color 0.6s ease; }
    .tool-link{padding:6px 14px;background:var(--surface);border-radius:20px;color:var(--text2);font-size:14px;border:1px solid rgba(255,255,255,0.05);transition:all 0.2s;}.tool-link:hover{border-color:var(--accent);color:var(--text);}
    @media(max-width:768px) { .step-swatch{width:45px;height:60px;font-size:0.55rem;} }
  </style>
</head>
<body class="bg-transition">
  <div id="nav"></div>
  <div class="container" style="padding-top:2rem;">
    <h1 class="section-title" style="background:var(--gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;">Color Mixer</h1>
    <p style="text-align:center;color:var(--text2);margin-bottom:1rem;">Blend two colors and explore the gradient between them</p>

    <div class="mixer-row">
      <div class="color-input-group">
        <input type="color" id="c1" value="#7c3aed">
        <input type="text" id="c1hex" value="#7c3aed" maxlength="7">
        <span style="color:var(--text2);font-size:0.85rem;">Color 1</span>
      </div>
      <div style="font-size:2rem;">‚ûï</div>
      <div class="color-input-group">
        <input type="color" id="c2" value="#ec4899">
        <input type="text" id="c2hex" value="#ec4899" maxlength="7">
        <span style="color:var(--text2);font-size:0.85rem;">Color 2</span>
      </div>
      <div style="font-size:2rem;">=</div>
      <div>
        <div class="result-swatch" id="resultSwatch"></div>
        <div id="resultHex" style="text-align:center;margin-top:0.5rem;font-weight:700;cursor:pointer;" onclick="CP.copy(this.textContent)"></div>
      </div>
    </div>

    <div class="mode-tabs" id="modeTabs"></div>
    <div class="gradient-bar" id="gradientBar" onclick="pickFromGradient(event)"></div>
    <p style="text-align:center;color:var(--text2);font-size:0.85rem;">Click the gradient bar to pick intermediate colors</p>

    <h3 style="text-align:center;margin:2rem 0 1rem;color:var(--text);">Intermediate Steps</h3>
    <div class="steps-row" id="stepsRow"></div>
  </div>

  <div style="max-width:800px;margin:3rem auto;padding:20px;text-align:center;">
    <p style="color:var(--text2);margin-bottom:12px;">üîó More Color Tools</p>
    <div style="display:flex;flex-wrap:wrap;gap:8px;justify-content:center;">
      <a href="index.html" class="tool-link">üè† Home</a>
      <a href="palette-generator.html" class="tool-link">üß† AI Palette</a>
      <a href="shades-generator.html" class="tool-link">üåó Shades</a>
      <a href="hex-rgb-converter.html" class="tool-link">üîÑ Converter</a>
      <a href="contrast-checker.html" class="tool-link">üîç Contrast</a>
      <a href="color-blindness.html" class="tool-link">üëÅÔ∏è Blindness Sim</a>
    </div>
  </div>
  <div id="footer"></div>

  <script>
    document.getElementById('nav').innerHTML = CP.nav('color-mixer.html');
    document.getElementById('footer').innerHTML = CP.footer();

    const modes = ['Normal','Multiply','Screen','Overlay'];
    let currentMode = 'Normal';

    document.getElementById('modeTabs').innerHTML = modes.map(m =>
      `<button class="mode-tab${m===currentMode?' active':''}" onclick="setMode('${m}')">${m}</button>`
    ).join('');

    function setMode(m) {
      currentMode = m;
      document.querySelectorAll('.mode-tab').forEach(t => t.classList.toggle('active', t.textContent===m));
      update();
    }

    function blend(rgb1, rgb2, t) {
      return rgb1.map((c, i) => Math.round(c + (rgb2[i] - c) * t));
    }

    function blendMode(rgb1, rgb2, mode) {
      const n1 = rgb1.map(c => c/255), n2 = rgb2.map(c => c/255);
      let result;
      switch(mode) {
        case 'Multiply': result = n1.map((c,i) => c * n2[i]); break;
        case 'Screen': result = n1.map((c,i) => 1 - (1-c)*(1-n2[i])); break;
        case 'Overlay': result = n1.map((c,i) => c < 0.5 ? 2*c*n2[i] : 1-2*(1-c)*(1-n2[i])); break;
        default: result = n1.map((c,i) => (c + n2[i]) / 2);
      }
      return result.map(c => Math.round(Math.min(255, Math.max(0, c*255))));
    }

    const c1=document.getElementById('c1'), c1hex=document.getElementById('c1hex');
    const c2=document.getElementById('c2'), c2hex=document.getElementById('c2hex');
    c1.addEventListener('input', e=>{c1hex.value=e.target.value;update();});
    c2.addEventListener('input', e=>{c2hex.value=e.target.value;update();});
    c1hex.addEventListener('input', e=>{if(/^#[0-9a-f]{6}$/i.test(e.target.value)){c1.value=e.target.value;update();}});
    c2hex.addEventListener('input', e=>{if(/^#[0-9a-f]{6}$/i.test(e.target.value)){c2.value=e.target.value;update();}});

    function update() {
      const rgb1 = CP.hex2rgb(c1.value), rgb2 = CP.hex2rgb(c2.value);
      const mixed = blendMode(rgb1, rgb2, currentMode);
      const mixedHex = CP.rgb2hex(...mixed);
      document.getElementById('resultSwatch').style.background = mixedHex;
      document.getElementById('resultHex').textContent = mixedHex;
      document.getElementById('gradientBar').style.background = `linear-gradient(to right, ${c1.value}, ${c2.value})`;

      // Steps
      const steps = [];
      for(let i=0;i<=10;i++) {
        const t = i/10;
        const s = blend(rgb1, rgb2, t);
        steps.push(CP.rgb2hex(...s));
      }
      document.getElementById('stepsRow').innerHTML = steps.map(hex =>
        `<div class="step-swatch" style="background:${hex}" onclick="copyWithConfetti('${hex}',event)">${hex}</div>`
      ).join('');

      // BG
      document.body.style.backgroundColor = `rgb(${Math.round(mixed[0]*0.07)},${Math.round(mixed[1]*0.07)},${Math.round(mixed[2]*0.07+10)})`;
    }

    function pickFromGradient(e) {
      const rect = e.target.getBoundingClientRect();
      const t = (e.clientX - rect.left) / rect.width;
      const rgb1 = CP.hex2rgb(c1.value), rgb2 = CP.hex2rgb(c2.value);
      const picked = blend(rgb1, rgb2, t);
      const hex = CP.rgb2hex(...picked);
      copyWithConfetti(hex, e);
    }

    function copyWithConfetti(hex, e) {
      CP.copy(hex);
      const container = document.createElement('div');
      container.className = 'confetti';
      container.style.left = e.clientX + 'px';
      container.style.top = e.clientY + 'px';
      for(let i=0;i<12;i++){
        const p=document.createElement('div');
        p.className='confetti-piece';
        p.style.background=['#7c3aed','#ec4899','#f59e0b','#10b981','#3b82f6'][Math.floor(Math.random()*5)];
        p.style.left=(Math.random()-0.5)*80+'px';
        p.style.animationDelay=Math.random()*0.3+'s';
        container.appendChild(p);
      }
      document.body.appendChild(container);
      setTimeout(()=>container.remove(),1500);
    }

    update();
  </script>
<script>(function(){var s=location.hostname,p=location.pathname;new Image().src="https://site-analytics.cap.1ktower.com/hit?s="+encodeURIComponent(s)+"&p="+encodeURIComponent(p)+"&t="+Date.now();})()</script>
</body>
</html>
